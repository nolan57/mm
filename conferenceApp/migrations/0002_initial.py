# Generated by Django 5.1.3 on 2024-12-15 11:57

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("conferenceApp", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AddField(
            model_name="checkinrecord",
            name="checked_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="handled_check_ins",
                to=settings.AUTH_USER_MODEL,
                verbose_name="签到处理人",
            ),
        ),
        migrations.AddField(
            model_name="checkinrecord",
            name="station",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="check_in_records",
                to="conferenceApp.checkinstation",
                verbose_name="签到站点",
            ),
        ),
        migrations.AddField(
            model_name="checkinstation",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="check_in_stations",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="checkinrecord",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="check_in_records",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="accommodation",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accommodations",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="contact",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="contacts",
                to="conferenceApp.conference",
            ),
        ),
        migrations.AddField(
            model_name="contactperson",
            name="company",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="contacts",
                to="conferenceApp.company",
                verbose_name="所属公司",
            ),
        ),
        migrations.AddField(
            model_name="contactperson",
            name="user",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="contact_person",
                to=settings.AUTH_USER_MODEL,
                verbose_name="用户账号",
            ),
        ),
        migrations.AddField(
            model_name="fieldoption",
            name="field",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="options",
                to="conferenceApp.formfield",
                verbose_name="所属字段",
            ),
        ),
        migrations.AddField(
            model_name="fieldlogicrule",
            name="target_field",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="target_rules",
                to="conferenceApp.formfield",
                verbose_name="目标字段",
            ),
        ),
        migrations.AddField(
            model_name="fieldlogicrule",
            name="trigger_field",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="trigger_rules",
                to="conferenceApp.formfield",
                verbose_name="触发字段",
            ),
        ),
        migrations.AddField(
            model_name="formfieldresponse",
            name="field",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="responses",
                to="conferenceApp.formfield",
                verbose_name="字段",
            ),
        ),
        migrations.AddField(
            model_name="formfieldresponse",
            name="response",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="field_responses",
                to="conferenceApp.formresponse",
                verbose_name="表单回复",
            ),
        ),
        migrations.AddField(
            model_name="materialcollection",
            name="check_in_record",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="material_collections",
                to="conferenceApp.checkinrecord",
                verbose_name="签到记录",
            ),
        ),
        migrations.AddField(
            model_name="meal",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="meals",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="mealoption",
            name="meal",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="options",
                to="conferenceApp.meal",
                verbose_name="餐次",
            ),
        ),
        migrations.AddField(
            model_name="mealregistration",
            name="meal",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registrations",
                to="conferenceApp.meal",
                verbose_name="餐次",
            ),
        ),
        migrations.AddField(
            model_name="mealregistration",
            name="meal_option",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registrations",
                to="conferenceApp.mealoption",
                verbose_name="餐饮选项",
            ),
        ),
        migrations.AddField(
            model_name="participant",
            name="company",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="participants",
                to="conferenceApp.company",
                verbose_name="所属公司",
            ),
        ),
        migrations.AddField(
            model_name="participant",
            name="registered_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registered_participants",
                to="conferenceApp.contactperson",
                verbose_name="登记人",
            ),
        ),
        migrations.AddField(
            model_name="mealregistration",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="meal_registrations",
                to="conferenceApp.participant",
                verbose_name="参会者",
            ),
        ),
        migrations.AddField(
            model_name="formresponse",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="form_responses",
                to="conferenceApp.participant",
                verbose_name="参会人员",
            ),
        ),
        migrations.AddField(
            model_name="checkinrecord",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="check_in_records",
                to="conferenceApp.participant",
                verbose_name="参会者",
            ),
        ),
        migrations.AddField(
            model_name="accommodation",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accommodations",
                to="conferenceApp.participant",
                verbose_name="参会者",
            ),
        ),
        migrations.AddField(
            model_name="registration",
            name="conference",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registrations",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="registration",
            name="contact_person",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="submitted_registrations",
                to="conferenceApp.contactperson",
                verbose_name="提交人",
            ),
        ),
        migrations.AddField(
            model_name="registration",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registrations",
                to="conferenceApp.participant",
                verbose_name="参会人员",
            ),
        ),
        migrations.AddField(
            model_name="registrationform",
            name="conference",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="registration_forms",
                to="conferenceApp.conference",
                verbose_name="关联会议",
            ),
        ),
        migrations.AddField(
            model_name="registration",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registrations",
                to="conferenceApp.registrationform",
                verbose_name="报名表单",
            ),
        ),
        migrations.AddField(
            model_name="formresponse",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="responses",
                to="conferenceApp.registrationform",
                verbose_name="表单",
            ),
        ),
        migrations.AddField(
            model_name="formfield",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="fields",
                to="conferenceApp.registrationform",
                verbose_name="所属表单",
            ),
        ),
        migrations.AddField(
            model_name="fieldlogicrule",
            name="form",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="logic_rules",
                to="conferenceApp.registrationform",
                verbose_name="所属表单",
            ),
        ),
        migrations.AddField(
            model_name="conference",
            name="registration_form",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="conferences",
                to="conferenceApp.registrationform",
                verbose_name="当前报名表单",
            ),
        ),
        migrations.AddField(
            model_name="meal",
            name="restaurant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="meals",
                to="conferenceApp.restaurant",
                verbose_name="餐厅",
            ),
        ),
        migrations.AddField(
            model_name="accommodation",
            name="room",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="accommodations",
                to="conferenceApp.room",
                verbose_name="房间",
            ),
        ),
        migrations.AddField(
            model_name="roomtype",
            name="hotel",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="room_types",
                to="conferenceApp.hotel",
                verbose_name="所属酒店",
            ),
        ),
        migrations.AddField(
            model_name="room",
            name="room_type",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="rooms",
                to="conferenceApp.roomtype",
                verbose_name="房型",
            ),
        ),
        migrations.AddField(
            model_name="route",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="routes",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="seatassignment",
            name="conference",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="seat_assignments",
                to="conferenceApp.conference",
                verbose_name="会议",
            ),
        ),
        migrations.AddField(
            model_name="seatassignment",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="seat_assignments",
                to="conferenceApp.participant",
                verbose_name="参会者",
            ),
        ),
        migrations.AddField(
            model_name="seatassignment",
            name="seat",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="assignments",
                to="conferenceApp.seat",
                verbose_name="座位",
            ),
        ),
        migrations.AddField(
            model_name="trip",
            name="route",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="trips",
                to="conferenceApp.route",
                verbose_name="路线",
            ),
        ),
        migrations.AddField(
            model_name="tripregistration",
            name="participant",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="trip_registrations",
                to="conferenceApp.participant",
                verbose_name="参会者",
            ),
        ),
        migrations.AddField(
            model_name="tripregistration",
            name="trip",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="registrations",
                to="conferenceApp.trip",
                verbose_name="行程",
            ),
        ),
        migrations.AddField(
            model_name="trip",
            name="vehicle",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="trips",
                to="conferenceApp.vehicle",
                verbose_name="车辆",
            ),
        ),
        migrations.AddField(
            model_name="venueroom",
            name="venue",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="rooms",
                to="conferenceApp.venue",
                verbose_name="所属会场",
            ),
        ),
        migrations.AddField(
            model_name="seat",
            name="room",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="seats",
                to="conferenceApp.venueroom",
                verbose_name="所属房间",
            ),
        ),
        migrations.AddField(
            model_name="checkinstation",
            name="room",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="check_in_stations",
                to="conferenceApp.venueroom",
                verbose_name="所在房间",
            ),
        ),
        migrations.AddConstraint(
            model_name="contactperson",
            constraint=models.UniqueConstraint(
                condition=models.Q(("is_primary", True)),
                fields=("company", "is_primary"),
                name="unique_primary_contact",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="materialcollection",
            unique_together={("check_in_record", "material_type")},
        ),
        migrations.AddIndex(
            model_name="participant",
            index=models.Index(
                fields=["registration_number"], name="conferenceA_registr_325762_idx"
            ),
        ),
        migrations.AddIndex(
            model_name="participant",
            index=models.Index(fields=["status"], name="conferenceA_status_21530a_idx"),
        ),
        migrations.AlterUniqueTogether(
            name="mealregistration",
            unique_together={("meal", "participant")},
        ),
        migrations.AlterUniqueTogether(
            name="checkinrecord",
            unique_together={("conference", "participant")},
        ),
        migrations.AlterUniqueTogether(
            name="registration",
            unique_together={("conference", "participant")},
        ),
        migrations.AlterUniqueTogether(
            name="formfield",
            unique_together={("form", "name")},
        ),
        migrations.AlterUniqueTogether(
            name="meal",
            unique_together={("conference", "restaurant", "meal_type", "date")},
        ),
        migrations.AlterUniqueTogether(
            name="room",
            unique_together={("room_type", "room_number")},
        ),
        migrations.AlterUniqueTogether(
            name="seatassignment",
            unique_together={("conference", "participant"), ("conference", "seat")},
        ),
        migrations.AlterUniqueTogether(
            name="tripregistration",
            unique_together={("trip", "participant")},
        ),
        migrations.AlterUniqueTogether(
            name="venueroom",
            unique_together={("venue", "room_number")},
        ),
        migrations.AlterUniqueTogether(
            name="seat",
            unique_together={("room", "seat_number")},
        ),
        migrations.AlterUniqueTogether(
            name="checkinstation",
            unique_together={("conference", "name")},
        ),
    ]
